ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, fill = difficulty), alpha = .2) +
geom_line(aes(color = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction',
caption = 'This is only for those subjects who show the overall trend.'
) +
theme_bw() +
theme(legend.position = c(.1,.2))
whole %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, fill = difficulty), alpha = .2) +
geom_line(aes(color = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.1,.2))
whole$choiceTrial_c <- whole$choiceTrial - 20
m1 <- glm(selectedRiskyDeck ~ choiceTrial_c * difficulty, data = whole, family = binomial(link = 'logit'))
summary(m1)
print(summary(m1))
print(confint(m1))
whole %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, fill = difficulty), alpha = .2) +
geom_line(aes(color = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.1,.2))
whole$choiceTrial_c <- whole$choiceTrial - 20
m1 <- glm(selectedRiskyDeck ~ choiceTrial_c * difficulty, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(confint(m1))
whole %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.2))
whole %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.2))
whole %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.2),
axis.ticks = element_blank())
whole %>%
mutate(ssd = selectedRiskyDeck - 1) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.2),
axis.ticks = element_blank())
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.2),
axis.ticks = element_blank())
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank())
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank())
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank())
whole$choiceTrial_c <- whole$choiceTrial - 20
m1 <- glm(selectedRiskyDeck ~ choiceTrial_c * difficulty, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(confint(m1))
ggsave('exp3-pypool_choice_time.pdf', height = 5.5, width = 7.5)
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_blank() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank())
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank(),
panel.grid = element_blank,
text = element_text(size = 16))
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank(),
panel.grid = element_blank(),
text = element_text(size = 16))
ggsave('exp3-pypool_choice_time.pdf', height = 5.5, width = 7.5)
q()
library(tidyverse)
d <- read.csv('../../../data/dstCleanChoice1.csv')
head(d)
N <- length(unique(d$subject))
## what proportion of subjects align with general trend
aligned_subjects <- d %>%
group_by(subject, difficulty) %>%
summarize(srd = mean(selectedRiskyDeck)) %>%
spread(difficulty, srd) %>%
filter(`Easier than Reference` > `Harder than Reference`) %>%
select(subject)
aligned_subjects <- aligned_subjects$subject
aligned_count <- length(aligned_subjects)
print(paste0(round((aligned_count / N) * 100, 2), '% of subjects are aligned with general trend.'))
## look at stuff over time ##
whole <- d
d <- d[d$subject %in% aligned_subjects,]
## start with raw data
d$aligned <- ifelse((d$difficulty == 'Easier than Reference' & d$selectedRiskyDeck == 1) | (d$difficulty == 'Harder than Reference' & d$selectedRiskyDeck == 0), 'Aligned', 'Not Aligned')
s <- d[d$subject %in% aligned_subjects[1:5], c('subject', 'difficulty', 'selectedRiskyDeck', 'choiceTrial', 'aligned')]
d %>%
ggplot(aes(x = choiceTrial, y = aligned)) +
#geom_line(aes(group = subject)) +
geom_jitter(width = .15, height = .1, alpha = .2) +
labs(
x = 'Trial',
y = 'Selected Risky Deck'
) #+
#facet_grid(rows = vars(subject)) +
#scale_color_manual(values = c('Aligned' = 'Green', 'Not Aligned' = 'Red'))
## average across subjects
d %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, fill = difficulty), alpha = .2) +
geom_line(aes(color = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction',
caption = 'This is only for those subjects who show the overall trend.'
) +
theme_bw() +
theme(legend.position = c(.1,.2))
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank(),
panel.grid = element_blank(),
text = element_text(size = 16))
whole$choiceTrial_c <- whole$choiceTrial - 20
m1 <- glm(selectedRiskyDeck ~ choiceTrial_c * difficulty, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(confint(m1))
ggsave('exp3_choice_time.pdf', height = 5.5, width = 7.5)
q()
library(tidyverse)
d <- read.csv('../../../data/dstCleanChoice1.csv')
head(d)
N <- length(unique(d$subject))
## what proportion of subjects align with general trend
aligned_subjects <- d %>%
group_by(subject, difficulty) %>%
summarize(srd = mean(selectedRiskyDeck)) %>%
spread(difficulty, srd) %>%
filter(`Easier than Reference` > `Harder than Reference`) %>%
select(subject)
aligned_subjects <- aligned_subjects$subject
aligned_count <- length(aligned_subjects)
print(paste0(round((aligned_count / N) * 100, 2), '% of subjects are aligned with general trend.'))
## look at stuff over time ##
whole <- d
d <- d[d$subject %in% aligned_subjects,]
## start with raw data
d$aligned <- ifelse((d$difficulty == 'Easier than Reference' & d$selectedRiskyDeck == 1) | (d$difficulty == 'Harder than Reference' & d$selectedRiskyDeck == 0), 'Aligned', 'Not Aligned')
s <- d[d$subject %in% aligned_subjects[1:5], c('subject', 'difficulty', 'selectedRiskyDeck', 'choiceTrial', 'aligned')]
d %>%
ggplot(aes(x = choiceTrial, y = aligned)) +
#geom_line(aes(group = subject)) +
geom_jitter(width = .15, height = .1, alpha = .2) +
labs(
x = 'Trial',
y = 'Selected Risky Deck'
) #+
#facet_grid(rows = vars(subject)) +
#scale_color_manual(values = c('Aligned' = 'Green', 'Not Aligned' = 'Red'))
## average across subjects
d %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, fill = difficulty), alpha = .2) +
geom_line(aes(color = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction',
caption = 'This is only for those subjects who show the overall trend.'
) +
theme_bw() +
theme(legend.position = c(.1,.2))
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank(),
panel.grid = element_blank(),
text = element_text(size = 16))
whole$choiceTrial_c <- whole$choiceTrial - 20
whole$ssd <- 1 - whole$selectedRiskyDeck
m1 <- glm(ssd ~ choiceTrial_c * difficulty, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(confint(m1))
ggsave('exp3-pypool_choice_time.pdf', height = 5.5, width = 7.5)
q()
library(tidyverse)
d <- read.csv('../../../data/dstCleanChoice1.csv')
head(d)
N <- length(unique(d$subject))
## what proportion of subjects align with general trend
aligned_subjects <- d %>%
group_by(subject, difficulty) %>%
summarize(srd = mean(selectedRiskyDeck)) %>%
spread(difficulty, srd) %>%
filter(`Easier than Reference` > `Harder than Reference`) %>%
select(subject)
aligned_subjects <- aligned_subjects$subject
aligned_count <- length(aligned_subjects)
print(paste0(round((aligned_count / N) * 100, 2), '% of subjects are aligned with general trend.'))
## look at stuff over time ##
whole <- d
d <- d[d$subject %in% aligned_subjects,]
## start with raw data
d$aligned <- ifelse((d$difficulty == 'Easier than Reference' & d$selectedRiskyDeck == 1) | (d$difficulty == 'Harder than Reference' & d$selectedRiskyDeck == 0), 'Aligned', 'Not Aligned')
s <- d[d$subject %in% aligned_subjects[1:5], c('subject', 'difficulty', 'selectedRiskyDeck', 'choiceTrial', 'aligned')]
d %>%
ggplot(aes(x = choiceTrial, y = aligned)) +
#geom_line(aes(group = subject)) +
geom_jitter(width = .15, height = .1, alpha = .2) +
labs(
x = 'Trial',
y = 'Selected Risky Deck'
) #+
#facet_grid(rows = vars(subject)) +
#scale_color_manual(values = c('Aligned' = 'Green', 'Not Aligned' = 'Red'))
## average across subjects
d %>%
group_by(difficulty, choiceTrial) %>%
summarize(srd = mean(selectedRiskyDeck), se = sd(selectedRiskyDeck) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = srd)) +
geom_ribbon(aes(ymin = srd - se, ymax = srd + se, fill = difficulty), alpha = .2) +
geom_line(aes(color = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Risky Deck',
color = 'Direction',
fill = 'Direction',
caption = 'This is only for those subjects who show the overall trend.'
) +
theme_bw() +
theme(legend.position = c(.1,.2))
whole %>%
mutate(ssd = 1 - selectedRiskyDeck) %>%
group_by(difficulty, choiceTrial) %>%
summarize(ssd_ = mean(ssd), se = sd(ssd) / sqrt(aligned_count)) %>%
ggplot(aes(x = choiceTrial, y = ssd_)) +
geom_ribbon(aes(ymin = ssd_ - se, ymax = ssd_ + se, group = difficulty), alpha = .2) +
geom_line(aes(linetype = difficulty)) +
ylim(0, 1) +
labs(
x = 'Trial',
y = 'Proportion Selected Safe Deck',
linetype = 'Direction'
) +
theme_bw() +
theme(legend.position = c(.2,.8),
axis.ticks = element_blank(),
panel.grid = element_blank(),
text = element_text(size = 16))
whole$choiceTrial_c <- whole$choiceTrial - 20
whole$ssd <- 1 - whole$selectedRiskyDeck
ggsave('exp3-pypool_choice_time.pdf', height = 5.5, width = 7.5)
summary(whole$choiceTrial)
m1 <- glm(ssd ~ choiceTrial_c * difficulty, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(confint(m1))
whole$choiceTrial_low <- whole$choiceTrial + 1
whole$choiceTrial_high <- whole$choiceTrial + 39
m_low <- glm(ssd ~ choiceTrial_low * difficulty, data = whole, family = binomial(link = 'logit'))
print('Centered Low:')
print(summary(m_low))
print(confint(m_low))
m_high <- glm(ssd ~ choiceTrial_high * difficulty, data = whole, family = binomial(link = 'logit'))
print('Centered High:')
print(summary(m_high))
print(confint(m_high))
whole$difficulty_dummy <- ifelse(whole$difficulty == 'Harder than Reference', 1, 0)
m1 <- glm(ssd ~ choiceTrial_c * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(confint(m1))
whole$choiceTrial_low <- whole$choiceTrial + 1
whole$choiceTrial_high <- whole$choiceTrial + 39
m_low <- glm(ssd ~ choiceTrial_low * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print('Centered Low:')
print(summary(m_low))
print(confint(m_low))
m_high <- glm(ssd ~ choiceTrial_high * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print('Centered High:')
print(summary(m_high))
print(confint(m_high))
print(exp(confint(m1)))
m1$coefficients
print(exp(m1$coefficients))
whole$difficulty_dummy <- ifelse(whole$difficulty == 'Harder than Reference', 1, 0)
m1 <- glm(ssd ~ choiceTrial_c * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(exp(m1$coefficients))
print(exp(confint(m1)))
whole$choiceTrial_low <- whole$choiceTrial + 1
whole$choiceTrial_high <- whole$choiceTrial + 39
m_low <- glm(ssd ~ choiceTrial_low * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print('Centered Low:')
print(summary(m_low))
print(exp(m_low$coefficients))
print(exp(confint(m_low)))
m_high <- glm(ssd ~ choiceTrial_high * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print('Centered High:')
print(summary(m_high))
print(exp(m_high$coefficients))
print(exp(confint(m_high)))
whole$difficulty_dummy <- ifelse(whole$difficulty == 'Harder than Reference', 1, 0)
m1 <- glm(ssd ~ choiceTrial_c * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print(summary(m1))
print(exp(m1$coefficients))
print(exp(confint(m1)))
whole$choiceTrial_low <- whole$choiceTrial - 1
whole$choiceTrial_high <- whole$choiceTrial - 40
m_low <- glm(ssd ~ choiceTrial_low * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print('Centered Low:')
print(summary(m_low))
print(exp(m_low$coefficients))
print(exp(confint(m_low)))
m_high <- glm(ssd ~ choiceTrial_high * difficulty_dummy, data = whole, family = binomial(link = 'logit'))
print('Centered High:')
print(summary(m_high))
print(exp(m_high$coefficients))
print(exp(confint(m_high)))
q()
